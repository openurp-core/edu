<?xml version="1.0" encoding="UTF-8"?>
<hibernate-mapping xmlns="http://www.hibernate.org/xsd/hibernate-mapping"
  xsi:schemaLocation="http://www.hibernate.org/xsd/hibernate-mapping classpath://org/hibernate/hibernate-mapping-4.0.xsd"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" package="org.openurp.teach.lesson.model"
  default-access="org.beangle.data.jpa.hibernate.PropertyAccessor">

  <class name="LessonBean" entity-name="org.openurp.teach.lesson.Lesson">
    <cache usage="read-write" />
    <id name="id" unsaved-value="null" type="long">
      <generator class="auto_increment" />
    </id>
    <property name="no" length="32" unique="true" not-null="true" />
    <many-to-one name="course" not-null="true" />
    <many-to-one name="courseType" not-null="true" />
    <many-to-one name="teachDepart" not-null="true" />
    <many-to-one name="campus" />
    <bag name="teachers" collection-type="seq">
      <key column="lesson_id" />
      <many-to-many column="teacher_id" class="org.openurp.teach.core.Teacher" />
    </bag>
    <!-- <bag name="tags" collection-type="seq"> <key column="lesson_id" 
      /> <many-to-many column="tag_id" class="org.openurp.teach.lessonTag"/> </bag> -->
    <component name="teachClass"
      class="org.openurp.teach.lesson.model.TeachClassBean">
      <parent name="lesson" />
      <property name="name" length="4000" not-null="true" />
      <property name="fullname" length="4000" not-null="true" />
      <property name="grade" />
      <many-to-one name="depart" />
      <property name="stdCount" not-null="true" />
      <property name="limitCount" />
      <property name="limitLocked" not-null="true" />
      <property name="reservedCount" />
      <set name="courseTakes" collection-type="set" inverse="true">
        <key column="teach_class_id" />
        <one-to-many class="org.openurp.teach.lesson.CourseTake" />
      </set>
      <set name="examTakes" collection-type="set" inverse="true">
        <key column="teach_class_id" />
        <one-to-many class="org.openurp.teach.exam.ExamTake" />
      </set>
      <set name="limitGroups" collection-type="seq" inverse="true">
        <key column="teach_class_id" />
        <one-to-many class="org.openurp.teach.lesson.CourseLimitGroup" />
      </set>
    </component>
    <component name="courseSchedule"
      class="org.openurp.teach.lesson.model.CourseScheduleBean">
      <parent name="lesson" />
      <property name="startWeek" not-null="true" />
      <property name="endWeek" not-null="true" />
      <property name="period" not-null="true" />
      <component name="weekState" class="org.openurp.teach.core.WeekState">
        <property name="value" column="week_state" not-null="true" />
      </component>
      <set name="activities" collection-type="set" inverse="true">
        <key column="course_schedule_id" />
        <one-to-many class="org.openurp.teach.schedule.CourseActivity" />
      </set>
      <many-to-one name="roomType" />
      <!-- <property name="status" not-null="true" /> -->
      <property name="coursePublished" not-null="true" />
    </component>
    <many-to-one name="campus" />
    <property name="teachClass" />
    <many-to-one name="semester" not-null="true" />
    <property name="courseSchedule" />
    <property name="examSchedule" />
    <property name="remark" length="500" />
    <many-to-one name="examMode" />
    <many-to-one name="langType" />
    <many-to-one name="group" />
    <property name="auditStatus" not-null="true" />
    <many-to-one name="examForm" />
    <property name="coursePeriod" />
    <component name="examSchedule"
      class="org.openurp.teach.lesson.model.ExamScheduleBean">
      <set name="activities" collection-type="set" inverse="true">
        <key column="exam_schedule_id" />
        <one-to-many class="org.openurp.teach.exam.ExamActivity" />
      </set>
      <set name="examTypes" collection-type="set" inverse="true">
        <key column="exam_schedule_id" />
        <many-to-many column="exam_Type_id"
          class="org.openurp.teach.code.ExamType" />
      </set>
    </component>
  </class>

</hibernate-mapping>